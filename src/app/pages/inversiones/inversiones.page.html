<app-header></app-header>

<ion-content class="ion-padding">
  <div class="container-acciones">
    <h2 class="titulo-principal">ACCIONES DE MERCADO</h2>

    <!-- Información de la acción actual -->
    <div class="info-accion">
      <h3>{{ acciones[activoIndex]?.nombre || 'Cargando...' }}</h3>
      <p>
        Precio: ${{ acciones[activoIndex]?.precio !== undefined ? acciones[activoIndex].precio.toFixed(2) : '...' }} |
        <span [style.color]="
          (acciones[activoIndex]?.cambio ?? 0) > 0 ? 'green' :
          (acciones[activoIndex]?.cambio ?? 0) < 0 ? 'red' : 'gray'">
          {{ (acciones[activoIndex]?.cambio ?? 0) >= 0 ? '+' : '' }}
          {{ acciones[activoIndex]?.cambio !== undefined ? acciones[activoIndex].cambio.toFixed(2) : '...' }}%
        </span>
      </p>
    </div>

    <!-- Gráfico -->
    <div class="grafico-accion">
      <canvas baseChart
        [data]="lineChartData"
        [options]="lineChartOptions"
        [type]="lineChartType">
      </canvas>
    </div>

    <!-- Botones navegación (Anterior - Invertir - Siguiente) -->
    <div class="botones-navegacion" style="display: flex; justify-content: space-between; margin-top: 20px;">
      <ion-button (click)="anteriorAccion()" [disabled]="activoIndex === 0">Anterior</ion-button>
      <ion-button>Invertir</ion-button>
      <ion-button (click)="siguienteAccion()" [disabled]="activoIndex === acciones.length - 1">Siguiente</ion-button>
    </div>
  </div>

  
  <div style="position: fixed; bottom: 10px; left: 10px;">
    <ion-button expand="block" class="atras-button" (click)="irAMenuPrincipal()">ATRÁS</ion-button>
  </div>

  <div style="position: fixed; bottom: 10px; right: 10px;">
    <ion-button expand="block" class="consulta-gpt-button" (click)="irConsultaGpt()">CONSULTA GPT</ion-button>
  </div>
</ion-content>
