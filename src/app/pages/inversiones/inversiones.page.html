<app-header></app-header>

<ion-content class="ion-padding">
  <div class="container">
    <ion-card class="stock-card">
      <ion-card-header class="ion-text-center">
        <ion-card-subtitle>Análisis de Mercado</ion-card-subtitle>
        <ion-card-title>{{ acciones[activoIndex].nombre }}</ion-card-title>
        <p class="price-info">
          Precio: ${{ acciones[activoIndex].precio.toFixed(2) }}
          <span [ngClass]="{
              'price-up': acciones[activoIndex].cambio > 0, 
              'price-down': acciones[activoIndex].cambio < 0
            }">
            ({{ acciones[activoIndex].cambio >= 0 ? '+' : '' }}{{ acciones[activoIndex].cambio.toFixed(2) }}%)
          </span>
        </p>
      </ion-card-header>

      <ion-card-content>
        <div class="chart-container">
          <canvas baseChart
            [data]="lineChartData"
            [options]="lineChartOptions"
            [type]="lineChartType">
          </canvas>
        </div>

        <div class="action-buttons">
          <ion-button fill="clear" (click)="anteriorAccion()" [disabled]="activoIndex === 0">
            <ion-icon slot="icon-only" name="chevron-back-outline"></ion-icon>
          </ion-button>
          
          <ion-button class="invest-button" (click)="irInvertir()">
            <ion-icon name="analytics-outline" slot="start"></ion-icon>
            Invertir en esta Acción
          </ion-button>

          <ion-button fill="clear" (click)="siguienteAccion()" [disabled]="activoIndex === acciones.length - 1">
            <ion-icon slot="icon-only" name="chevron-forward-outline"></ion-icon>
          </ion-button>
        </div>
      </ion-card-content>
    </ion-card>
  </div>
</ion-content>